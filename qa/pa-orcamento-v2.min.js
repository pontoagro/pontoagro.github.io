!function(){try{let a={init:()=>{a.applyDataTable(),a.applyValidate(),a.applyMaskInPhone(),a.submitForm(),a.bringData()},ajaxStop:()=>{},applyDataTable:()=>{let n=$("#pa-tabela-items").DataTable({searching:!1,paging:!1,info:!1,dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>\n                <'row'<'col-sm-12'tr>>\n                <'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>\n                <'row'<'py-4 w-100 d-flex justify-content-end'B>>",buttons:[{extend:"pdfHtml5",text:"Exportar Planilha para PDF",orientation:"landscape",className:"btn-info mr-2"},{extend:"excelHtml5",text:"Exportar lista para Excel",className:"btn-secondary"}],language:{url:"//cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json"}});$("#pa-btn-add-item").on("click",a=>{a.preventDefault();let t=$("#pa-inputCodeProduct"),e=$("#pa-inputDescription"),o=$("#pa-inputQtt");0!=t.val().length&&0!=e.val().length&&0!=o.val().length?(n.row.add([t.val(),e.val(),o.val(),'<button class="pa-delete-product"><i class="fas fa-trash-alt"></i></button>']).draw(),t.val(""),e.val(""),o.val("")):alert("Ops! Faltou algum campo a ser preenchindo.")}),$(document).on("click",".pa-delete-product",a=>{a.preventDefault(),$(a.target).is(".pa-delete-product")?n.row($(a.target).parent()).remove().draw():$(a.target).is(".fas.fa-trash-alt")&&n.row($(a.target).parent().parent()).remove().draw()})},applyValidate:()=>{$("#pa-form-orcamento").validate({rules:{nome:{required:!0},email:{required:!0,email:!0},telefone:{required:!0}}})},applyMaskInPhone:()=>{let n=a=>11===a.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009";$("#pa-inputTelefone").mask(n,{onKeyPress:function(a,t,e,o){e.mask(n.apply({},arguments),o)}})},submitForm:()=>{let t=$("#pa-form-orcamento");t.on("submit",a=>{a.preventDefault();a=t.serializeObject();t[0].checkValidity()&&(console.log("Formulario Submetido"),console.log(a),$.ajax({type:"POST",url:"/api/dataentities/LO/documents",dataType:"json",headers:{Accept:"application/vnd.vtex.ds.v10+json","Content-Type":"application/json; charset=utf-8"},data:JSON.stringify(a)}).done(function(a){console.log("Dados Disparados!");let t=a.DocumentId,e=document.getElementById("pa-inputArquivo").files[0],o=new FormData;o.append(e.name.replace("listaprodutos",""),e),$.ajax({type:"POST",url:"/api/dataentities/LO/documents/"+t+"/listaprodutos/attachments",crossDomain:!0,data:o,processData:!1,contentType:!1,mimeType:"multipart/form-data",headers:{Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(a){console.log("Planilha enviada!"),swal({title:"Orçamento enviado com sucesso",text:"Entraremos em contato o mais breve possível.",icon:"success"}).then(()=>{location.reload()})})}))})},bringData:()=>{let a=$("#pa-inputCodeProduct"),t=$("#pa-inputDescription"),e=$("#pa-list-code-product"),o=$("#pa-list-description");a.on("keyup",function(){let a=$(this).val(),t="";$.ajax({url:"/buscaautocomplete/",dataType:"json",data:{maxRows:12,productNameContains:a}}).done(function(a){a.itemsReturned.forEach(a=>{a=`<li><button>${a.name}</button></li>`;t+=a}),e.html(`<ul>${t}</ul>`),e.removeClass("hide")})}),t.on("keyup",function(){let a=$(this).val(),t="";$.ajax({url:"/buscaautocomplete/",dataType:"json",data:{maxRows:12,productNameContains:a}}).done(function(a){a.itemsReturned.forEach(a=>{a=`<li>${a.name}</li>`;t+=a}),o.html(`<ul>${t}</ul>`),o.removeClass("hide")})})},selectResult:()=>{$("#pa-list-code-product button")}};$(document).ready(a.init),$(document).ajaxStop(a.ajaxStop)}catch(a){console.log("Erro na instância do [Orcamento]: ",a)}}();